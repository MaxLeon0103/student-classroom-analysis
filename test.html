<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学生课堂分析系统 - 测试页面</title>
    <link rel="stylesheet" href="public/styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- 头部 -->
        <header class="header">
            <div class="header-content">
                <i class="fas fa-graduation-cap header-icon"></i>
                <h1>学生课堂分析系统</h1>
                <p class="header-subtitle">智能评价，精准分析</p>
            </div>
        </header>

        <!-- 主要内容区域 -->
        <main class="main-content">
            <div class="form-container">
                <!-- 课堂内容输入区域 -->
                <div class="input-section">
                    <div class="section-header">
                        <i class="fas fa-book-open section-icon"></i>
                        <h2>课堂内容记录</h2>
                    </div>
                    <div class="input-group">
                        <label for="classroom-content">请输入课堂内容：</label>
                        <textarea 
                            id="classroom-content" 
                            placeholder="请详细描述学生在课堂上的表现，包括学习态度、参与度、知识掌握情况等..."
                            rows="6"
                        ></textarea>
                        <div class="char-count">
                            <span id="char-count">0</span> / 500 字符
                        </div>
                    </div>
                </div>

                <!-- 评价等级选择区域 -->
                <div class="rating-section">
                    <div class="section-header">
                        <i class="fas fa-star section-icon"></i>
                        <h2>评价等级</h2>
                    </div>
                    <div class="rating-options">
                        <div class="rating-item">
                            <input type="radio" id="excellent" name="rating" value="优秀">
                            <label for="excellent" class="rating-label excellent">
                                <i class="fas fa-star"></i>
                                <span>优秀</span>
                            </label>
                        </div>
                        <div class="rating-item">
                            <input type="radio" id="good" name="rating" value="良好">
                            <label for="good" class="rating-label good">
                                <i class="fas fa-thumbs-up"></i>
                                <span>良好</span>
                            </label>
                        </div>
                        <div class="rating-item">
                            <input type="radio" id="average" name="rating" value="一般">
                            <label for="average" class="rating-label average">
                                <i class="fas fa-minus"></i>
                                <span>一般</span>
                            </label>
                        </div>
                        <div class="rating-item">
                            <input type="radio" id="poor" name="rating" value="待改进">
                            <label for="poor" class="rating-label poor">
                                <i class="fas fa-exclamation-triangle"></i>
                                <span>待改进</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- 生成按钮 -->
                <div class="action-section">
                    <button id="generate-btn" class="generate-btn" disabled>
                        <i class="fas fa-magic"></i>
                        <span>生成评价</span>
                    </button>
                </div>
            </div>

            <!-- 评价结果展示区域 -->
            <div class="result-container" id="result-container" style="display: none;">
                <div class="section-header">
                    <i class="fas fa-clipboard-check section-icon"></i>
                    <h2>AI生成评价</h2>
                </div>
                <div class="result-content">
                    <div class="result-header">
                        <div class="result-meta">
                            <span class="result-date" id="result-date"></span>
                            <span class="result-rating" id="result-rating"></span>
                        </div>
                        <button id="copy-btn" class="copy-btn">
                            <i class="fas fa-copy"></i>
                            复制
                        </button>
                    </div>
                    <div class="result-text" id="result-text"></div>
                </div>
            </div>
        </main>

        <!-- 加载提示 -->
        <div class="loading-overlay" id="loading-overlay" style="display: none;">
            <div class="loading-content">
                <div class="spinner"></div>
                <p>AI正在生成评价中...</p>
            </div>
        </div>

        <!-- 错误提示 -->
        <div class="error-toast" id="error-toast" style="display: none;">
            <i class="fas fa-exclamation-circle"></i>
            <span id="error-message"></span>
        </div>

        <!-- 成功提示 -->
        <div class="success-toast" id="success-toast" style="display: none;">
            <i class="fas fa-check-circle"></i>
            <span>评价生成成功！</span>
        </div>
    </div>

    <script>
        // 模拟AI评价生成功能（用于测试前端）
        function generateMockEvaluation(content, rating) {
            const evaluations = {
                '优秀': `该学生在课堂上表现非常出色。学习态度积极主动，能够认真听讲并积极参与课堂讨论。对知识的掌握程度很好，能够准确回答老师提出的问题，并展现出良好的思维能力和创新性。在团队合作中表现出色，能够与同学友好交流，主动帮助他人。建议继续保持这种良好的学习状态，可以尝试挑战更高难度的学习内容。`,
                '良好': `该学生在课堂上表现良好。学习态度端正，能够认真听讲并适当参与课堂活动。对知识的掌握基本到位，能够回答大部分问题，思维较为活跃。在团队合作中表现积极，能够与同学正常交流合作。建议在学习中更加主动一些，多提出问题和想法，进一步提升学习效果。`,
                '一般': `该学生在课堂上表现一般。学习态度基本端正，但参与度有待提高。对知识的掌握程度中等，需要更多练习来巩固所学内容。在团队合作中表现尚可，但交流不够主动。建议加强学习主动性，多参与课堂讨论，提高学习效率。`,
                '待改进': `该学生在课堂上表现有待改进。学习态度需要更加积极，参与度较低。对知识的掌握程度不够扎实，需要加强基础学习。在团队合作中表现一般，交流能力有待提升。建议端正学习态度，加强基础知识学习，积极参与课堂活动，提高学习效果。`
            };
            
            return evaluations[rating] || '评价生成中...';
        }

        // DOM元素
        const contentTextarea = document.getElementById('classroom-content');
        const charCount = document.getElementById('char-count');
        const ratingInputs = document.querySelectorAll('input[name="rating"]');
        const generateBtn = document.getElementById('generate-btn');
        const resultContainer = document.getElementById('result-container');
        const resultText = document.getElementById('result-text');
        const resultDate = document.getElementById('result-date');
        const resultRating = document.getElementById('result-rating');
        const copyBtn = document.getElementById('copy-btn');
        const loadingOverlay = document.getElementById('loading-overlay');
        const errorToast = document.getElementById('error-toast');
        const errorMessage = document.getElementById('error-message');
        const successToast = document.getElementById('success-toast');

        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            initializeEventListeners();
            updateGenerateButton();
        });

        // 事件监听器
        function initializeEventListeners() {
            // 内容输入监听
            contentTextarea.addEventListener('input', function() {
                updateCharCount();
                updateGenerateButton();
            });

            // 评价等级选择监听
            ratingInputs.forEach(input => {
                input.addEventListener('change', updateGenerateButton);
            });

            // 生成按钮点击
            generateBtn.addEventListener('click', generateEvaluation);

            // 复制按钮点击
            copyBtn.addEventListener('click', copyResult);
        }

        // 更新字符计数
        function updateCharCount() {
            const content = contentTextarea.value;
            const count = content.length;
            charCount.textContent = count;
            
            // 字符数限制提示
            if (count > 500) {
                charCount.style.color = '#dc3545';
                contentTextarea.value = content.substring(0, 500);
                charCount.textContent = '500';
            } else if (count > 400) {
                charCount.style.color = '#ffc107';
            } else {
                charCount.style.color = '#999';
            }
        }

        // 更新生成按钮状态
        function updateGenerateButton() {
            const hasContent = contentTextarea.value.trim().length > 0;
            const hasRating = Array.from(ratingInputs).some(input => input.checked);
            
            generateBtn.disabled = !(hasContent && hasRating);
        }

        // 生成评价（模拟版本）
        async function generateEvaluation() {
            const content = contentTextarea.value.trim();
            const selectedRating = document.querySelector('input[name="rating"]:checked');
            
            // 验证输入
            if (!content) {
                showError('请输入课堂内容');
                return;
            }
            
            if (!selectedRating) {
                showError('请选择评价等级');
                return;
            }

            // 显示加载状态
            showLoading(true);
            
            // 模拟API调用延迟
            setTimeout(() => {
                try {
                    const evaluation = generateMockEvaluation(content, selectedRating.value);
                    displayResult(evaluation, selectedRating.value);
                    showSuccess();
                } catch (error) {
                    showError('生成评价时出现错误');
                } finally {
                    showLoading(false);
                }
            }, 2000);
        }

        // 显示结果
        function displayResult(evaluation, rating) {
            resultText.textContent = evaluation;
            resultRating.textContent = rating;
            resultDate.textContent = new Date().toLocaleString('zh-CN');
            resultContainer.style.display = 'block';
            
            // 滚动到结果区域
            resultContainer.scrollIntoView({ 
                behavior: 'smooth',
                block: 'start'
            });
        }

        // 复制结果
        async function copyResult() {
            try {
                await navigator.clipboard.writeText(resultText.textContent);
                
                // 临时改变按钮文本
                const originalText = copyBtn.innerHTML;
                copyBtn.innerHTML = '<i class="fas fa-check"></i> 已复制';
                copyBtn.style.background = '#28a745';
                
                setTimeout(() => {
                    copyBtn.innerHTML = originalText;
                    copyBtn.style.background = '#28a745';
                }, 2000);
                
            } catch (error) {
                console.error('复制失败:', error);
                showError('复制失败，请手动复制');
            }
        }

        // 显示加载状态
        function showLoading(show) {
            loadingOverlay.style.display = show ? 'flex' : 'none';
            generateBtn.disabled = show;
        }

        // 显示错误消息
        function showError(message) {
            errorMessage.textContent = message;
            errorToast.style.display = 'flex';
            
            setTimeout(() => {
                errorToast.style.display = 'none';
            }, 5000);
        }

        // 显示成功消息
        function showSuccess() {
            successToast.style.display = 'flex';
            
            setTimeout(() => {
                successToast.style.display = 'none';
            }, 3000);
        }
    </script>
</body>
</html>

